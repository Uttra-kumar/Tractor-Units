<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tractor - Advanced Admin Dashboard</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary: #3a7bd5;
      --secondary: #00d2ff;
      --accent: #ff6b6b;
      --dark: #2c3e50;
      --light: #ecf0f1;
      --success: #2ecc71;
      --warning: #f39c12;
      --info: #3498db;
      --card-bg: #ffffff;
      --header-bg: #ffffff;
      --text-color: #333333;
      --sidebar-bg: linear-gradient(135deg, var(--primary) 0%, #224a8d 100%);
      --menu-bg: #ffffff;
      --card-shadow: 0 8px 20px rgba(0, 0, 0, 0.12);
      --header-height: 80px;
      --menu-height: 70px;
      --transition: all 0.3s ease;
      --theme-name: 'light';
    }
    
    .dark-theme {
      --primary: #5e97f6;
      --secondary: #00c6ff;
      --accent: #ff7b7b;
      --dark: #f5f6fa;
      --light: #2f3640;
      --card-bg: #2d3436;
      --header-bg: #2d3436;
      --text-color: #f5f6fa;
      --sidebar-bg: linear-gradient(135deg, #2d3436 0%, #2c3e50 100%);
      --menu-bg: #353b48;
      --card-shadow: 0 8px 20px rgba(0, 0, 0, 0.25);
      --theme-name: 'dark';
    }
    
    .nature-theme {
      --primary: #2e7d32;
      --secondary: #66bb6a;
      --accent: #ef5350;
      --dark: #1b5e20;
      --light: #e8f5e9;
      --card-bg: #ffffff;
      --header-bg: #e8f5e9;
      --text-color: #1b5e20;
      --sidebar-bg: linear-gradient(135deg, #2e7d32 0%, #1b5e20 100%);
      --menu-bg: #c8e6c9;
      --card-shadow: 0 8px 20px rgba(46, 125, 50, 0.15);
      --theme-name: 'nature';
    }
    
    .sunset-theme {
      --primary: #ff6b6b;
      --secondary: #ff8e53;
      --accent: #4ecdc4;
      --dark: #ff5252;
      --light: #fff5f5;
      --card-bg: #ffffff;
      --header-bg: #fff5f5;
      --text-color: #ff6b6b;
      --sidebar-bg: linear-gradient(135deg, #ff6b6b 0%, #ff8e53 100%);
      --menu-bg: #ffecec;
      --card-shadow: 0 8px 20px rgba(255, 107, 107, 0.15);
      --theme-name: 'sunset';
    }
    
    .ocean-theme {
      --primary: #1e88e5;
      --secondary: #4fc3f7;
      --accent: #ff4081;
      --dark: #0d47a1;
      --light: #e3f2fd;
      --card-bg: #ffffff;
      --header-bg: #e3f2fd;
      --text-color: #1565c0;
      --sidebar-bg: linear-gradient(135deg, #1e88e5 0%, #0d47a1 100%);
      --menu-bg: #bbdefb;
      --card-shadow: 0 8px 20px rgba(30, 136, 229, 0.15);
      --theme-name: 'ocean';
    }
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Poppins', sans-serif;
    }
    
    body {
      background: var(--light);
      color: var(--text-color);
      min-height: 100vh;
      overflow-x: hidden;
      transition: var(--transition);
    }
    
    /* Header Styles */
    .header {
      background: var(--header-bg);
      color: var(--text-color);
      padding: 0 30px;
      height: var(--header-height);
      display: flex;
      justify-content: space-between;
      align-items: center;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 1000;
      box-shadow: var(--card-shadow);
      transition: var(--transition);
    }
    
    .logo {
      display: flex;
      align-items: center;
      font-size: 24px;
      font-weight: 700;
    }
    
    .logo i {
      margin-right: 12px;
      color: var(--secondary);
    }
    
    .time-display {
      display: flex;
      flex-direction: column;
      align-items: center;
      background: rgba(0, 0, 0, 0.1);
      padding: 10px 20px;
      border-radius: 8px;
    }
    
    #current-time {
      font-size: 20px;
      font-weight: 600;
      letter-spacing: 1px;
    }
    
    p {
      line-height: 1rem;
      color: #34495e;
      margin-bottom: 1rem;
    }
    
    footer {
      background: var(--dark);
      color: white;
      padding: 1.5rem 0;
      margin-top: 25px;
    }
    
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 2rem;
      text-align: center;
    }
    
    footer p {
      color: #ecf0f1;
      font-size: 1.2rem;
      margin-bottom: 0.5rem;
    }
    
    footer span {
      color: var(--accent);
      font-weight: 600;
    }
    
    /* Session counter specific styling */
    #counter {
      display: inline-block;
      padding: 0.25rem 0.75rem;
      border-radius: 20px;
      background: linear-gradient(45deg, var(--accent), var(--secondary));
      color: white;
      font-size: 20px;
      font-weight: bold;
      box-shadow: 0 4px 15px rgba(255, 107, 107, 0.4);
      animation: pulse 2s infinite;
      margin-left: 0.25rem;
    }
    
    p1 {
      font-size: 1.2rem;
      color: #ecf0f1 !important;
      display: inline-block;
      background: rgba(0, 0, 0, 0.2);
      padding: 0.5rem 1rem;
      border-radius: 5px;
    }
    
    #current-date {
      font-size: 15px;
      color: var(--text-color);
      font-weight: bold;
    }
    
    .admin-info {
      display: flex;
      align-items: center;
      position: relative;
    }
    
    .admin-info img {
      width: 45px;
      height: 45px;
      border-radius: 50%;
      margin-right: 15px;
      border: 2px solid var(--secondary);
      object-fit: cover;
    }
    
    .admin-details {
      line-height: 1.3;
    }
    
    .admin-details h3 {
      font-size: 16px;
      font-weight: 600;
    }
    
    .admin-details p {
      font-size: 12px;
      color: var(--text-color);
    }
    
    .theme-toggle {
      margin-left: 20px;
      cursor: pointer;
      font-size: 22px;
      color: var(--text-color);
      transition: var(--transition);
      position: relative;
    }
    
    .theme-options {
      position: absolute;
      top: 100%;
      right: 0;
      background: var(--card-bg);
      border-radius: 8px;
      box-shadow: var(--card-shadow);
      padding: 10px;
      display: none;
      flex-direction: column;
      gap: 10px;
      z-index: 1001;
      min-width: 150px;
      margin-top: 10px;
    }
    
    .theme-option {
      display: flex;
      align-items: center;
      padding: 8px 12px;
      border-radius: 6px;
      cursor: pointer;
      transition: var(--transition);
    }
    
    .theme-option:hover {
      background: rgba(0, 0, 0, 0.05);
    }
    
    .theme-option.active {
      background: rgba(0, 0, 0, 0.1);
      font-weight: 600;
    }
    
    .theme-color {
      width: 20px;
      height: 20px;
      border-radius: 50%;
      margin-right: 10px;
    }
    
    .theme-light .theme-color {
      background: linear-gradient(135deg, #3a7bd5, #00d2ff);
    }
    
    .theme-dark .theme-color {
      background: linear-gradient(135deg, #2d3436, #2c3e50);
    }
    
    .theme-nature .theme-color {
      background: linear-gradient(135deg, #2e7d32, #66bb6a);
    }
    
    .theme-sunset .theme-color {
      background: linear-gradient(135deg, #ff6b6b, #ff8e53);
    }
    
    .theme-ocean .theme-color {
      background: linear-gradient(135deg, #1e88e5, #4fc3f7);
    }
    
    /* Horizontal Menu */
    .horizontal-menu {
      background: var(--menu-bg);
      margin-top: var(--header-height);
      padding: 0 30px;
      display: flex;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 999;
      height: var(--menu-height);
      transition: var(--transition);
      overflow-x: auto;
      white-space: nowrap;
    }
    
    .horizontal-menu::-webkit-scrollbar {
      height: 5px;
    }
    
    .horizontal-menu::-webkit-scrollbar-track {
      background: transparent;
    }
    
    .horizontal-menu::-webkit-scrollbar-thumb {
      background: var(--primary);
      border-radius: 10px;
    }
    
    .menu-item {
      padding: 0 25px;
      display: flex;
      align-items: center;
      transition: var(--transition);
      cursor: pointer;
      border-bottom: 3px solid transparent;
      position: relative;
      overflow: hidden;
      height: 100%;
    }
    
    a {
      text-decoration: none;
    }
    
    .menu-item::before {
      content: '';
      position: absolute;
      left: 0;
      top: 0;
      height: 100%;
      width: 0;
      background: rgba(58, 123, 213, 0.1);
      transition: var(--transition);
      z-index: 0;
    }
    
    .menu-item:hover::before {
      width: 100%;
    }
    
    .menu-item:hover {
      border-bottom: 3px solid var(--secondary);
    }
    
    .menu-item.active {
      background: rgba(58, 123, 213, 0.1);
      border-bottom: 3px solid var(--secondary);
      width: 4rem;
    }
    
    .menu-item i {
      margin-right: 10px;
      font-size: 18px;
      color: var(--primary);
      position: relative;
      z-index: 1;
    }
    
    .menu-item span {
      font-size: 15px;
      font-weight: 500;
      position: relative;
      z-index: 1;
      color: var(--text-color);
    }
    
    .logout {
      margin-left: auto;
      display: flex;
      align-items: center;
      color: var(--accent);
      cursor: pointer;
      padding: 0 25px;
      transition: var(--transition);
      height: 100%;
    }
    
    .logout:hover {
      background: rgba(255, 107, 107, 0.1);
    }
    
    .logout i {
      margin-right: 10px;
      font-size: 18px;
    }
    
    .logout span {
      font-size: 15px;
      font-weight: 500;
    }
    
    /* Main Content Styles */
    .main-content {
      margin-top: calc(var(--header-height) + var(--menu-height));
      padding: 30px;
      transition: var(--transition);
    }
    
    .stats-cards {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 25px;
      margin-bottom: 40px;
    }
    
    .card {
      background: var(--card-bg);
      border-radius: 15px;
      padding: 25px;
      box-shadow: var(--card-shadow);
      transition: var(--transition);
      position: relative;
      overflow: hidden;
    }
    
    .card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 5px;
      height: 100%;
      background: linear-gradient(to bottom, var(--primary), var(--secondary));
    }
    
    .card:hover {
      transform: translateY(-5px);
      box-shadow: 0 12px 25px rgba(0, 0, 0, 0.15);
    }
    
    .stat-card {
      display: flex;
      align-items: center;
    }
    
    .stat-icon {
      width: 70px;
      height: 70px;
      border-radius: 15px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 28px;
      margin-right: 20px;
      background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
      color: white;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    }
    
    .stat-details h3 {
      font-size: 28px;
      margin-bottom: 5px;
      color: var(--text-color);
    }
    
    .stat-details p {
      color: #7f8c8d;
      font-size: 15px;
    }
    
    .progress-bar {
      height: 6px;
      background: #eee;
      border-radius: 3px;
      overflow: hidden;
      margin-top: 10px;
    }
    
    .progress {
      height: 100%;
      border-radius: 3px;
      transition: width 1s ease-in-out;
    }
    
    .users .progress {
      background: linear-gradient(to right, var(--primary), var(--secondary));
      width: 75%;
    }
    
    .fleet .progress {
      background: linear-gradient(to right, var(--success), #27ae60);
      width: 60%;
    }
    
    .diesel .progress {
      background: linear-gradient(to right, var(--warning), #e67e22);
      width: 85%;
    }
    
    .section {
      margin-bottom: 40px;
    }
    
    .section-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 25px;
    }
    
    .section-header h3 {
      font-size: 22px;
      color: var(--text-color);
      font-weight: 600;
    }
    
    .section-header h3 i {
      color: var(--primary);
      margin-right: 10px;
    }
    
    .view-all {
      color: var(--primary);
      text-decoration: none;
      font-weight: 500;
      display: flex;
      align-items: center;
    }
    
    .view-all i {
      margin-left: 5px;
      transition: var(--transition);
    }
    
    .view-all:hover i {
      transform: translateX(5px);
    }
    
    /* Card Rows with Two Cards Each */
    .card-rows {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
      gap: 25px;
    }
    
    .section-card {
      background: var(--card-bg);
      border-radius: 15px;
      padding: 30px;
      width: 93vw;
      margin-left: 25px;
      box-shadow: var(--card-shadow);
      transition: var(--transition);
      cursor: pointer;
      border: 1px solid transparent;
      position: relative;
      overflow: hidden;
      height: 100%;
    }
    
    .section-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 5px;
      background: linear-gradient(to right, var(--primary), var(--secondary));
    }
    
    .section-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 12px 25px rgba(0, 0, 0, 0.15);
      border-color: var(--primary);
    }
    
    .section-card i {
      font-size: 36px;
      margin-bottom: 20px;
      color: var(--primary);
      background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    
    .section-card h4 {
      font-size: 20px;
      margin-bottom: 15px;
      color: var(--text-color);
    }
    
    .section-card p {
      color: #7f8c8d;
      font-size: 15px;
      line-height: 1.6;
      margin-bottom: 20px;
    }
    
    .card-link {
      color: var(--primary);
      text-decoration: none;
      font-weight: 500;
      display: flex;
      align-items: center;
    }
    
    .card-link i {
      font-size: 16px;
      margin-left: 5px;
      transition: var(--transition);
      background: none;
      -webkit-background-clip: unset;
      -webkit-text-fill-color: unset;
      color: var(--primary);
    }
    
    .card-link:hover i {
      transform: translateX(5px);
    }
    
    /* Mobile menu toggle */
    .mobile-menu-toggle {
      display: none;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      width: 30px;
      height: 30px;
      cursor: pointer;
      margin-right: 20px;
    }
    
    .mobile-menu-toggle span {
      width: 100%;
      height: 3px;
      background: var(--text-color);
      margin: 2px 0;
      transition: var(--transition);
      border-radius: 3px;
    }
    
    /* Chart Container Styles */
    .chart-container {
      background: var(--card-bg);
      border-radius: 15px;
      padding: 25px;
      box-shadow: var(--card-shadow);
      margin-bottom: 25px;
      position: relative;
      overflow: hidden;
    }
    
    .chart-container::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 5px;
      height: 100%;
      background: linear-gradient(to bottom, var(--primary), var(--secondary));
    }
    
    .chart-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }
    
    .chart-header h3 {
      font-size: 18px;
      color: var(--text-color);
      font-weight: 600;
    }
    
    .chart-actions {
      display: flex;
      gap: 10px;
    }
    
    .chart-action {
      background: rgba(0, 0, 0, 0.05);
      border: none;
      padding: 6px 12px;
      border-radius: 6px;
      cursor: pointer;
      color: var(--text-color);
      font-size: 14px;
      transition: var(--transition);
    }
    
    .chart-action:hover {
      background: rgba(0, 0, 0, 0.1);
    }
    
    .chart-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 25px;
    }
    
    .chart-wrapper {
      position: relative;
      height: 300px;
    }
    
    .circular-chart-container {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 250px;
    }
    
    /* Recent Activity Styles */
    .activity-list {
      display: flex;
      flex-direction: column;
      gap: 15px;
    }
    
    .activity-item {
      display: flex;
      align-items: center;
      padding: 15px;
      background: rgba(0, 0, 0, 0.03);
      border-radius: 10px;
      transition: var(--transition);
    }
    
    .activity-item:hover {
      background: rgba(0, 0, 0, 0.06);
      transform: translateX(5px);
    }
    
    .activity-icon {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-right: 15px;
      font-size: 16px;
      color: white;
    }
    
    .activity-details {
      flex: 1;
    }
    
    .activity-details h4 {
      font-size: 20px;
      margin-bottom: 5px;
      color: var(--text-color);
    }
    
    .activity-details p {
      font-size: 17px;
      font-weight: bold;
      color: #7f8c8d;
      margin-bottom: 0;
    }
    
    .activity-time {
      font-size: 17px;
      font-weight: bold;
      color: black;
    }
    
    /* Data Table Styles */
    .data-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 15px;
    }
    
    .data-table th {
      background: rgba(0, 0, 0, 0.05);
      padding: 12px 15px;
      text-align: left;
      font-weight: 600;
      color: var(--text-color);
      border-bottom: 2px solid rgba(0, 0, 0, 0.1);
    }
    
    .data-table td {
      padding: 12px 15px;
      border-bottom: 1px solid rgba(0, 0, 0, 0.05);
    }
    
    .data-table tr:hover {
      background: rgba(0, 0, 0, 0.02);
    }
    
    .status-badge {
      display: inline-block;
      padding: 4px 10px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 600;
    }
    
    .status-active {
      background: rgba(46, 204, 113, 0.2);
      color: #27ae60;
    }
    
    .status-pending {
      background: rgba(243, 156, 18, 0.2);
      color: #d35400;
    }
    
    .status-inactive {
      background: rgba(231, 76, 60, 0.2);
      color: #c0392b;
    }
    
    /* Tabs */
    .tabs {
      display: flex;
      border-bottom: 1px solid rgba(0, 0, 0, 0.1);
      margin-bottom: 20px;
    }
    
    .tab {
      padding: 10px 20px;
      cursor: pointer;
      transition: var(--transition);
      border-bottom: 2px solid transparent;
    }
    
    .tab.active {
      border-bottom: 2px solid var(--primary);
      color: var(--primary);
      font-weight: 600;
    }
    
    .tab-content {
      display: none;
    }
    
    .tab-content.active {
      display: block;
    }
    
    /* Loading animation for activities */
@keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
}

.activity-item {
    animation: fadeIn 0.5s ease-out;
}
    
    /* Responsive Design */
    @media (max-width: 1200px) {
      .horizontal-menu {
        padding: 0 15px;
      }
      
      .menu-item span {
        font-size: 14px;
      }
      
      .menu-item {
        padding: 0 20px;
      }
    }
    
    @media (max-width: 992px) {
      .stats-cards {
        grid-template-columns: 1fr 1fr;
      }
      
      .header {
        padding: 0 20px;
      }
      
      .logo {
        font-size: 20px;
      }
      
      .time-display {
        padding: 8px 15px;
      }
      
      #current-time {
        font-size: 18px;
      }
      
      .card-rows {
        grid-template-columns: 1fr;
      }
      
      .chart-grid {
        grid-template-columns: 1fr;
      }
    }
    
    @media (max-width: 768px) {
      .stats-cards {
        grid-template-columns: 1fr;
      }
      
      .header {
        flex-wrap: wrap;
        height: auto;
        padding: 15px;
      }
      
      .logo {
        order: 1;
        margin-bottom: 15px;
        width: 100%;
        justify-content: center;
      }
      
      .time-display {
        order: 3;
        width: 100%;
        margin-top: 15px;
      }
      
      .admin-info {
        order: 2;
      }
      
      .horizontal-menu {
        margin-top: 130px;
        flex-wrap: wrap;
        height: auto;
        flex-direction: column;
        padding: 0;
        display: none;
      }
      
      .menu-item {
        height: 60px;
        width: 100%;
        padding: 0 20px;
        border-bottom: none;
        border-left: 3px solid transparent;
      }
      
      .menu-item:hover {
        border-bottom: none;
        border-left: 3px solid var(--secondary);
      }
      
      .menu-item.active {
        border-bottom: none;
        border-left: 3px solid var(--secondary);
      }
      
      .logout {
        margin-left: 0;
        padding: 0 20px;
        width: 100%;
        border-left: 3px solid transparent;
        height: 60px;
      }
      
      .main-content {
        margin-top: calc(var(--header-height));
        padding: 20px;
      }
      
      .stat-icon {
        width: 60px;
        height: 60px;
        font-size: 24px;
      }
      
      .mobile-menu-toggle {
        display: flex;
      }
      
      .menu-open .horizontal-menu {
        display: flex;
      }
      
      .mobile-menu-toggle.active span:nth-child(1) {
        transform: rotate(45deg) translate(5px, 5px);
      }
      
      .mobile-menu-toggle.active span:nth-child(2) {
        opacity: 0;
      }
      
      .mobile-menu-toggle.active span:nth-child(3) {
        transform: rotate(-45deg) translate(7px, -6px);
      }
    }
    
    @media (max-width: 576px) {
      .main-content {
        margin-top: calc(var(--header-height));
        padding: 15px;
      }
      
      .section-header {
        flex-direction: column;
        align-items: flex-start;
      }
      
      .view-all {
        margin-top: 10px;
      }
      
      .theme-options {
        left: 0;
        right: auto;
      }
      
      .chart-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 10px;
      }
      
      .chart-actions {
        align-self: flex-end;
      }
    }
    
    /* Animation for data loading */
    @keyframes pulse {
      0% {
        opacity: 0.6;
      }
      
      50% {
        opacity: 1;
      }
      
      100% {
        opacity: 0.6;
      }
    }
    
    .loading {
      animation: pulse 1.5s infinite;
      background: #f0f0f0;
      color: transparent;
      border-radius: 4px;
    }
  </style>
</head>

<body>
  <!-- Header -->
  <div class="header">
    <div class="mobile-menu-toggle" id="mobileMenuToggle">
      <span></span>
      <span></span>
      <span></span>
    </div>
    
    <div class="logo">
      <i class="fas fa-tractor"></i>
      <span>Tractor Admin</span>
    </div>
    
    <div class="time-display">
      <div id="current-time">11:45:32 AM</div>
      <div id="current-date">September 17, 2023</div>
    </div>
    
    <div class="admin-info">
      <div class="admin-details">
        <h3 id="admin-name">
          <i class="fas fa-user"></i>
          <span id="admin-text">Admin Administrator</span>
        </h3>
        <p>System Administrator</p>
      </div>
      <div class="theme-toggle" id="theme-toggle">
        <i class="fas fa-palette"></i>
        <div class="theme-options" id="theme-options">
          <div class="theme-option theme-light active">
            <div class="theme-color"></div>
            <span>Light</span>
          </div>
          <div class="theme-option theme-dark">
            <div class="theme-color"></div>
            <span>Dark</span>
          </div>
          <div class="theme-option theme-nature">
            <div class="theme-color"></div>
            <span>Nature</span>
          </div>
          <div class="theme-option theme-sunset">
            <div class="theme-color"></div>
            <span>Sunset</span>
          </div>
          <div class="theme-option theme-ocean">
            <div class="theme-color"></div>
            <span>Ocean</span>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Horizontal Menu -->
  <div class="horizontal-menu">
    <div class="menu-item active">
      <i class="fas fa-tachometer-alt"></i>
      <span>Dashboard</span>
    </div>
    <a href="admin-fleet.html">
      <div class="menu-item">
        <i class="fas fa-tractor"></i>
        <span>Fleet</span>
      </div>
    </a>
    <a href="admin-diseal.html">
      <div class="menu-item">
        <i class="fas fa-gas-pump"></i>
        <span>Diesel</span>
      </div>
    </a>
    <a href="admin-payment.html">
      <div class="menu-item">
        <i class="fas fa-money-bill-wave"></i>
        <span>Payment</span>
      </div>
    </a>
    <a href="admin-alluser.html">
      <div class="menu-item">
        <i class="fas fa-users"></i>
        <span>All Users</span>
      </div>
    </a>
    <a href="user-login.html">
      <div class="menu-item">
        <i class="fas fa-users"></i>
        <span>User Login</span>
      </div>
    </a>
    <a href="admin.html">
      <div class="menu-item">
        <i class="fas fa-cogs"></i>
        <span>Admin Data</span>
      </div>
    </a>
    <div class="logout" id="logoutBtn">
      <i class="fas fa-sign-out-alt"></i>
      <span>Logout</span>
    </div>
  </div>
  
  <!-- Main Content -->
  <div class="main-content">
    <div class="stats-cards">
      <div class="card users">
        <div class="stat-card">
          <div class="stat-icon">
            <i class="fas fa-users"></i>
          </div>
          <div class="stat-details">
            <h3 id="user-count" class="loading">0</h3>
            <p>Total Users</p>
            <div class="progress-bar">
              <div class="progress"></div>
            </div>
          </div>
        </div>
      </div>
      
      <div class="card fleet">
        <div class="stat-card">
          <div class="stat-icon">
            <i class="fas fa-tractor"></i>
          </div>
          <div class="stat-details">
            <h3 id="fleet-count" class="loading">0</h3>
            <p>Total Fleet</p>
            <div class="progress-bar">
              <div class="progress"></div>
            </div>
          </div>
        </div>
      </div>
      
      <div class="card diesel">
        <div class="stat-card">
          <div class="stat-icon">
            <i class="fas fa-gas-pump"></i>
          </div>
          <div class="stat-details">
            <h3 id="diesel-amount" class="loading">0 ₹</h3>
            <p>Total Diesel</p>
            <div class="progress-bar">
              <div class="progress"></div>
            </div>
          </div>
        </div>
      </div>
      <div class="card diesel">
        <div class="stat-card">
          <div class="stat-icon">
            <i class="fas fa-money-bill-wave"></i>
          </div>
          <div class="stat-details">
            <h3 id="amount" class="loading">0 ₹</h3>
            <p>Total Amount</p>
            <div class="progress-bar">
              <div class="progress"></div>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Charts Section -->
    <div class="section">
      
      
      
    </div>
    
    <!-- Data Tables Section -->
    <div class="section">
      <div class="section-header">
        <h3><i class="fas fa-table"></i> Data Overview</h3>
        <a href="#" class="view-all">View All Data <i class="fas fa-arrow-right"></i></a>
      </div>
      
      <div class="chart-container">
        <div class="tabs">
          <div class="tab active" data-tab="users">Users</div>
          <div class="tab" data-tab="fleet">Fleet</div>
          <div class="tab" data-tab="diesel">Diesel</div>
          <div class="tab" data-tab="payment">Payments</div>
        </div>
        
        <div class="tab-content active" id="users-tab">
          <table class="data-table">
            <thead>
              <tr>
                <th>Name</th>
                <th>Mobile</th>
                <th>Role</th>
                <th>ID</th>
                <th>Status</th>
              </tr>
            </thead>
            <tbody id="users-table-body">
              <tr>
                <td colspan="5" style="text-align: center;">Loading data...</td>
              </tr>
            </tbody>
          </table>
        </div>
        
        <div class="tab-content" id="fleet-tab">
          <table class="data-table">
            <thead>
              <tr>
                <th>ID</th>
                <th>User</th>
                <th>Running Time</th>
              </tr>
            </thead>
            <tbody id="fleet-table-body">
              <tr>
                <td colspan="5" style="text-align: center;">Loading data...</td>
              </tr>
            </tbody>
          </table>
        </div>
        
        <div class="tab-content" id="diesel-tab">
          <table class="data-table">
            <thead>
              <tr>
                <th>Date</th>
                <th>Amount (L)</th>
                <th>Name</th>
                <th>Notes</th>
                
              </tr>
            </thead>
            <tbody id="diesel-table-body">
              <tr>
                <td colspan="5" style="text-align: center;">Loading data...</td>
              </tr>
            </tbody>
          </table>
        </div>
        
        <div class="tab-content" id="payment-tab">
          <table class="data-table">
            <thead>
              <tr>
                <th>Date</th>
                <th>Day</th>
                <th>Amount (₹)</th>
                <th>User</th>
                
                <th>Notes</th>
              </tr>
            </thead>
            <tbody id="payment-table-body">
              <tr>
                <td colspan="5" style="text-align: center;">Loading data...</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
    
    <!-- Recent Activity Section -->
    <!-- Recent Activity Section -->
    <div class="section">
      <div class="section-header">
        <h3><i class="fas fa-history"></i> Recent Activity</h3>
        <a href="#" class="view-all">View All <i class="fas fa-arrow-right"></i></a>
      </div>
      
      <div class="chart-container">
        <div class="activity-list" id="recent-activities">
          <!-- Activities will be loaded dynamically -->
          <div class="activity-item">
            <div class="activity-icon" style="background: var(--info);">
              <i class="fas fa-sync-alt"></i>
            </div>
            <div class="activity-details">
              <h4>Loading activities...</h4>
              <p>Please wait while we fetch the latest activities</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Quick Access Section -->
  <div class="section">
    <div class="section-header">
      <h3><i class="fas fa-bolt"></i> Quick Access</h3>
      <a href="#" class="view-all">View All <i class="fas fa-arrow-right"></i></a>
    </div>
    
    <div class="card-rows">
      <a href="admin-alluser.html" style="text-decoration: none;">
        <div class="section-card">
          <i class="fas fa-users"></i>
          <h4>All User</h4>
          <p>View and manage group wise user details and fleets and payments</p>
          <a href="admin-alluser.html" class="card-link">Access</a>
        </div>
      </a>
      
      <a href="userFleet.html" style="text-decoration: none;">
        <div class="section-card">
          <i class="fas fa-filter"></i>
          <h4>User Fleet Entry</h4>
          <p>Process and track fleet and manage fleet by a user</p>
          <a href="userFleet.html" class="card-link">Access</a>
        </div>
      </a>
      
      <a href="admin-f&PP.html" style="text-decoration: none;">
        <div class="section-card">
          <i class="fas fa-chart-line"></i>
          <h4>Admin F&P 2</h4>
          <p>Monitor fuel consumption patterns, generate reports, and optimize fuel usage across your fleet.</p>
          <a href="admin-f&PP.html" class="card-link">Access</a>
        </div>
      </a>
      
      <a href="userUpdate.html" style="text-decoration: none;">
        <div class="section-card">
          <i class="fas fa-cogs"></i>
          <h4>User Updation</h4>
          <p>Manage user accounts, permissions, and access levels for the tractor management system.</p>
          <a href="userUpdate.html" class="card-link">Access</a>
        </div>
      </a>
      
      <a href="adminfilter.html" style="text-decoration: none;">
        <div class="section-card">
          <i class="fas fa-tractor"></i>
          <h4>Admin Filter</h4>
          <p>View and manage individual fleet details, maintenance in Date wise and operational status.</p>
          <a href="adminfilter.html" class="card-link">Access</a>
        </div>
      </a>
      
      <a href="admin-f&p.html" style="text-decoration: none;">
        <div class="section-card">
          <i class="fas fa-tractor"></i>
          <h4>F&P Filtration</h4>
          <p>View and manage individual tractor fleet details and Payment records, and operational status.</p>
          <a href="admin-f&p.html" class="card-link">Access</a>
        </div>
      </a>
      
      <a href="paymentReg.html" style="text-decoration: none;">
        <div class="section-card">
          <i class="fas fa-credit-card"></i>
          <h4>Payment Details</h4>
          <p>View and manage individual & whole tractor fleet details and Payment records, and operational status.</p>
          <a href="paymentReg.html" class="card-link">Access</a>
        </div>
      </a>
    </div>
  </div>

  <script src="session.js"></script>
  <footer>
    <div class="container">
      <p>&copy; 2025 Tractor Fleet Management || Designed By <span>Uttra Patel</span><br />
        <p1>session expired is <span id="counter">0s</span></p1>
      </p>
    </div>
  </footer>
  
  <script>
    // Supabase Configuration
    const SUPABASE_URL = 'https://iydamvrlxtwsnqvflaxq.supabase.co';
    const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Iml5ZGFtdnJseHR3c25xdmZsYXhxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTgwOTczMTIsImV4cCI6MjA3MzY3MzMxMn0.Z8m6XGyu9wsN_UJ8EZYr12BRemsO12_U8EEZ9JizQ6w';
    
    // Initialize Supabase
    const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_KEY);
    
    // DOM Elements
    const themeToggle = document.getElementById('theme-toggle');
    const themeOptions = document.getElementById('theme-options');
    const themeOptionElements = document.querySelectorAll('.theme-option');
    const mobileMenuToggle = document.getElementById('mobileMenuToggle');
    const horizontalMenu = document.querySelector('.horizontal-menu');
    const logoutBtn = document.getElementById('logoutBtn');
    
    // Time and Date
    const currentTime = document.getElementById('current-time');
    const currentDate = document.getElementById('current-date');
    
    // Stats Elements
    const userCount = document.getElementById('user-count');
    const fleetCount = document.getElementById('fleet-count');
    const dieselAmount = document.getElementById('diesel-amount');
    const amount = document.getElementById('amount');
    
    // Session Counter
    
    
    // Chart Variables
  // Load Recent Activities from Supabase
async function loadRecentActivities() {
  try {
    const recentActivities = [];
    
    // Fetch recent user registrations
    const { data: usersData, error: usersError } = await supabase
      .from('userRegistration-T')
      .select('name, created_at')
      .order('created_at', { ascending: false })
      .limit(2);
    
    if (!usersError && usersData) {
      usersData.forEach(user => {
        recentActivities.push({
          type: 'user',
          name: user.name,
          timestamp: user.created_at,
          icon: 'user-plus',
          color: 'success',
          title: 'New user registration',
          description: `${user.name} registered as a new user`
        });
      });
    }
    
    // Fetch recent fleet entries
    const { data: fleetData, error: fleetError } = await supabase
      .from('userFleet')
      .select('*')
      .order('created_at', { ascending: false })
      .limit(2);
    
    if (!fleetError && fleetData) {
      fleetData.forEach(fleet => {
      // console.log(fleet)
        recentActivities.push({
          type: 'fleet',
          //name: fleet.name,
          timestamp: fleet.created_at,
          icon: 'tractor',
          color: 'primary',
          title: 'New fleet entry',
          description: `${fleet.runningtime} Minutes for ${fleet.user_id}  ${fleet.name}`
        });
      });
    }
    
    // Fetch recent diesel entries
    const { data: disealData, error: disealError } = await supabase
      .from('admin-diseal')
      .select('*')
      .order('created_at', { ascending: false })
      .limit(1);
    
    if (!disealError && disealData) {
      disealData.forEach(diseal => {
        
        recentActivities.push({
          type: 'diseal',
          name: diseal.name,
          amount: diseal.amount,
          timestamp: diseal.created_at,
          icon: 'gas-pump',
          color: 'warning',
          title: 'Diesel refill',
          description: `${diseal.amount} Rupees diesel added by ${diseal.name}`
        });
      });
    }
    
    // Fetch recent payments 
    const { data: paymentData, error: paymentError } = await supabase
      .from('admin-singePay')
      .select('*')
      .order('created_at', { ascending: false })
      .limit(1);
    
    if (!paymentError && paymentData) {
      paymentData.forEach(payment => {
        console.log('pay')
        recentActivities.push({
          type: 'payment',
          name: payment.name,
          amount: payment.amount,
          timestamp: payment.created_at,
          icon: 'money-bill-wave',
          color: 'info',
          title: 'Payment received',
          description: `Payment of ₹${payment.paid_amount} of ${payment.total_amount} received from ${payment.name}`
        });
      });
    }
    
    // Sort activities by timestamp (newest first)
    recentActivities.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));
    
    // Take only the 5 most recent activities
    const displayActivities = recentActivities.slice(0, 5);
    
    // Update the DOM
    updateActivitiesDOM(displayActivities);
    
  } catch (error) {
    console.error('Error loading recent activities:', error);
    document.getElementById('recent-activities').innerHTML = `
            <div class="activity-item">
                <div class="activity-icon" style="background: var(--accent);">
                    <i class="fas fa-exclamation-triangle"></i>
                </div>
                <div class="activity-details">
                    <h4>Error loading activities</h4>
                    <p>Please try refreshing the page</p>
                </div>
            </div>
        `;
  }
}

// Update Activities DOM
function updateActivitiesDOM(activities) {
  const activitiesContainer = document.getElementById('recent-activities');
  
  if (activities.length === 0) {
    activitiesContainer.innerHTML = `
            <div class="activity-item">
                <div class="activity-icon" style="background: var(--info);">
                    <i class="fas fa-info-circle"></i>
                </div>
                <div class="activity-details">
                    <h4>No recent activities</h4>
                    <p>Activities will appear here as they happen</p>
                </div>
            </div>
        `;
    return;
  }
  
  activitiesContainer.innerHTML = activities.map(activity => {
    const timeAgo = getTimeAgo(activity.timestamp);
    const color = getColorValue(activity.color);
    
    return `
            <div class="activity-item">
                <div class="activity-icon" style="background: ${color};">
                    <i class="fas fa-${activity.icon}"></i>
                </div>
                <div class="activity-details">
                    <h4>${activity.title}</h4>
                    <p>${activity.description}</p>
                </div>
                <div class="activity-time">${timeAgo}</div>
            </div>
        `;
  }).join('');
}

// Get Color Value from CSS Variable
function getColorValue(colorName) {
  const root = document.documentElement;
  return getComputedStyle(root).getPropertyValue(`--${colorName}`).trim();
}

// Calculate Time Ago
function getTimeAgo(timestamp) {
  if (!timestamp) return 'Unknown time';
  
  const now = new Date();
  const activityTime = new Date(timestamp);
  const diffInSeconds = Math.floor((now - activityTime) / 1000);
  
  if (diffInSeconds < 60) {
    return 'Just now';
  } else if (diffInSeconds < 3600) {
    const minutes = Math.floor(diffInSeconds / 60);
    return `${minutes} min ago`;
  } else if (diffInSeconds < 86400) {
    const hours = Math.floor(diffInSeconds / 3600);
    return `${hours} hour${hours > 1 ? 's' : ''} ago`;
  } else if (diffInSeconds < 604800) {
    const days = Math.floor(diffInSeconds / 86400);
    return `${days} day${days > 1 ? 's' : ''} ago`;
  } else {
    return activityTime.toLocaleDateString('en-US', {
      month: 'short',
      day: 'numeric'
    });
  }
}
    
    
    
    // Initialize Dashboard
    // Initialize Dashboard
document.addEventListener('DOMContentLoaded', function() {
  // Initialize time display
  updateTime();
  setInterval(updateTime, 1000);
  
  // Initialize session counter
  
  // Initialize stats with loading animation
  loadStats();
  
  // Initialize charts
  setTimeout(initializeCharts, 1000);
  
  // Load data tables
  loadDataTables();
  
  // Load recent activities
  loadRecentActivities();
  
  // Add event listeners
  setupEventListeners();
});
    
    // Update Time Function
    function updateTime() {
      const now = new Date();
      const time = now.toLocaleTimeString('en-US', { hour12: true });
      const date = now.toLocaleDateString('en-US', {
        weekday: 'long',
        year: 'numeric',
        month: 'long',
        day: 'numeric'
      });
      
      currentTime.textContent = time;
      currentDate.textContent = date;
    }
    
    // Update Session Counter
    
    
    // Load Stats from Supabase
    async function loadStats() {
      try {
        // Fetch users count
        const { count: userCountData, error: userError } = await supabase
          .from('userRegistration-T')
          .select('*', { count: 'exact', head: true });
        
        if (!userError) {
          animateValue(userCount, 0, userCountData, 1500);
        } else {
          userCount.textContent = 'Error';
          userCount.classList.remove('loading');
        }
        
        // Fetch fleet count
        const { count: fleetCountData, error: fleetError } = await supabase
          .from('admin-fleet')
          .select('*', { count: 'exact', head: true });
        
        if (!fleetError) {
          animateValue(fleetCount, 0, fleetCountData, 1500);
        } else {
          fleetCount.textContent = 'Error';
          fleetCount.classList.remove('loading');
        }
        
        // Fetch diesel amount
        const { data: dieselData, error: dieselError } = await supabase
          .from('admin-diseal')
          .select('amount');
        
        if (!dieselError) {
          const totalDiesel = dieselData.reduce((sum, item) => sum + (parseInt(item.amount) || 0), 0);
          animateValue(dieselAmount, 0, totalDiesel, 1500, '₹');
        } else {
          dieselAmount.textContent = 'Error';
          dieselAmount.classList.remove('loading');
        }
        
        // Fetch payment amount
        const { data: paymentData, error: paymentError } = await supabase
          .from('admin-payment')
          .select('amount');
        
        if (!paymentError) {
          const totalPayment = paymentData.reduce((sum, item) => sum + (parseFloat(item.amount) || 0), 0);
          animateValue(amount, 0, totalPayment, 1500, '₹');
        } else {
          amount.textContent = 'Error';
          amount.classList.remove('loading');
        }
        
        // Fetch admin name
        const { data: adminData, error: adminError } = await supabase
          .from('admin')
          .select('name')
          .single();
        
        if (!adminError && adminData) {
          document.getElementById('admin-name').innerHTML =
            `<i class="fas fa-user"></i> ${adminData.name}`;
        }
        
      } catch (error) {
        console.error('Error loading stats:', error);
        // Set fallback values
        userCount.textContent = '245';
        fleetCount.textContent = '42';
        dieselAmount.textContent = '1250 L';
        amount.textContent = '₹125,000';
        
        userCount.classList.remove('loading');
        fleetCount.classList.remove('loading');
        dieselAmount.classList.remove('loading');
        amount.classList.remove('loading');
      }
    }
    
    // Animate Value Function
    function animateValue(element, start, end, duration, suffix = '') {
      let startTimestamp = null;
      const step = (timestamp) => {
        if (!startTimestamp) startTimestamp = timestamp;
        const progress = Math.min((timestamp - startTimestamp) / duration, 1);
        
        if (suffix === '₹') {
          // Format as currency
          const value = Math.floor(progress * (end - start) + start);
          element.textContent = '₹' + value.toLocaleString('en-IN');
        } else if (suffix === 'L') {
          // Format as liters
          const value = Math.floor(progress * (end - start) + start);
          element.textContent = value.toLocaleString('en-IN') + ' L';
        } else {
          // Format as regular number
          const value = Math.floor(progress * (end - start) + start);
          element.textContent = value.toLocaleString('en-IN');
        }
        
        if (progress < 1) {
          window.requestAnimationFrame(step);
        } else {
          element.classList.remove('loading');
        }
      };
      window.requestAnimationFrame(step);
    }
    
    // Initialize Charts
    function initializeCharts() {
      // Fleet Usage Chart
      
    }
    
    // Load Data Tables from Supabase
    async function loadDataTables() {
      try {
        // Load Users Table
        const { data: usersData, error: usersError } = await supabase
          .from('userRegistration-T')
          .select('*')
          .limit(5);
        
        if (!usersError && usersData) {
          const usersTableBody = document.getElementById('users-table-body');
          usersTableBody.innerHTML = '';
          
          usersData.forEach(user => {
            const row = document.createElement('tr');
            row.innerHTML = `
                            <td>${user.name || 'N/A'}</td>
                            <td>${user.mobile || 'N/A'}</td>
                            <td>${user.role || 'N/A'}</td>
                            <td>${user.id || 'N/A'}</td>
                            <td><span class="status-badge status-active">Active</span></td>
                        `;
            usersTableBody.appendChild(row);
          });
        }
        
        // Load Fleet Table
        const { data: fleetData, error: fleetError } = await supabase
          .from('admin-fleet')
          .select('*')
          .limit(5);
        
        if (!fleetError && fleetData) {
          const fleetTableBody = document.getElementById('fleet-table-body');
          fleetTableBody.innerHTML = '';
          
          fleetData.forEach(vehicle => {
            const row = document.createElement('tr');
            row.innerHTML = `
                            <td>${vehicle.id || 'N/A'}</td>
                            <td>${vehicle.name || 'N/A'}</td>
                            <td>${vehicle.running_time || 'N/A'}</td>
                        `;
            fleetTableBody.appendChild(row);
          });
        }
        
        // Load Diesel Table
        const { data: dieselData, error: dieselError } = await supabase
          .from('admin-diseal')
          .select('*')
          .limit(5);
        
        if (!dieselError && dieselData) {
          const dieselTableBody = document.getElementById('diesel-table-body');
          dieselTableBody.innerHTML = '';
          
          dieselData.forEach(record => {
            const row = document.createElement('tr');
            row.innerHTML = `
                            <td>${record.date || 'N/A'}</td>
                            <td>${record.amount || '0'} </td>
                            <td>${record.name || '0'}</td>
                            <td>${record.notes || 'N/A'}</td>
                        `;
            dieselTableBody.appendChild(row);
          });
        }
        
        // Load Payments Table
        const { data: paymentData, error: paymentError } = await supabase
          .from('admin-payment')
          .select('*')
          .limit(5);
        
        if (!paymentError && paymentData) {
          const paymentTableBody = document.getElementById('payment-table-body');
          paymentTableBody.innerHTML = '';
          
          paymentData.forEach(payment => {
            const row = document.createElement('tr');
            row.innerHTML = `
                            <td>${payment.date || 'N/A'}</td>
                            <td>${payment.custom_day || '0'}</td>
                            <td>${payment.amount || 'N/A'}</td>
                            <td>${payment.name || 'N/A'}</td>
    <td>${payment.notes || 'N/A'}</td>
                        `;
            paymentTableBody.appendChild(row);
          });
        }
        
      } catch (error) {
        console.error('Error loading data tables:', error);
      }
    }
    
    // Setup Event Listeners
    function setupEventListeners() {
      // Theme Toggle
      themeToggle.addEventListener('click', function(e) {
        e.stopPropagation();
        themeOptions.style.display = themeOptions.style.display === 'flex' ? 'none' : 'flex';
      });
      
      // Theme Selection
      themeOptionElements.forEach(option => {
        option.addEventListener('click', function() {
          const theme = this.classList[1].replace('theme-', '');
          document.body.className = theme + '-theme';
          
          // Update active theme option
          themeOptionElements.forEach(opt => opt.classList.remove('active'));
          this.classList.add('active');
          
          // Close theme options
          themeOptions.style.display = 'none';
          
          // Update charts with new theme colors
          updateChartsForTheme();
        });
      });
      
      // Close theme options when clicking outside
      document.addEventListener('click', function() {
        themeOptions.style.display = 'none';
      });
      
      // Mobile Menu Toggle
      mobileMenuToggle.addEventListener('click', function() {
        document.body.classList.toggle('menu-open');
        this.classList.toggle('active');
      });
      
      // Menu Item Active State
      const menuItems = document.querySelectorAll('.menu-item');
      menuItems.forEach(item => {
        item.addEventListener('click', function() {
          menuItems.forEach(i => i.classList.remove('active'));
          this.classList.add('active');
          
          // Close mobile menu after selection
          if (window.innerWidth <= 768) {
            document.body.classList.remove('menu-open');
            mobileMenuToggle.classList.remove('active');
          }
        });
      });
      
      
      
      // Chart Action Buttons
      const chartActions = document.querySelectorAll('.chart-action');
      chartActions.forEach(action => {
        action.addEventListener('click', function() {
          // Remove active class from all buttons in the same container
          const parent = this.closest('.chart-actions');
          parent.querySelectorAll('.chart-action').forEach(btn => {
            btn.classList.remove('active');
          });
          
          // Add active class to clicked button
          this.classList.add('active');
          
          // In a real app, this would update the chart data
        });
      });
      
      // Tab Switching
      const tabs = document.querySelectorAll('.tab');
      tabs.forEach(tab => {
        tab.addEventListener('click', function() {
          const tabId = this.getAttribute('data-tab');
          
          // Remove active class from all tabs and tab contents
          tabs.forEach(t => t.classList.remove('active'));
          document.querySelectorAll('.tab-content').forEach(content => {
            content.classList.remove('active');
          });
          
          // Add active class to clicked tab and corresponding content
          this.classList.add('active');
          document.getElementById(`${tabId}-tab`).classList.add('active');
        });
      });
    }
    
    // Update Charts for Current Theme
    function updateChartsForTheme() {
      // This function would update chart colors based on the current theme
      // For simplicity, we're just destroying and recreating the charts
      if (fleetChart) fleetChart.destroy();
      if (fuelChart) fuelChart.destroy();
      if (revenueChart) revenueChart.destroy();
      if (userDistributionChart) userDistributionChart.destroy();
      
      setTimeout(initializeCharts, 100);
    }
  </script>
</body>

</html>
